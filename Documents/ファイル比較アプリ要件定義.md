# ファイル比較アプリ要件定義

マルチプラットフォーム(windows,macos,linux)前提。
ファイルの実際の比較表示は外部比較ツールに任せて、このツール内では実際の内容を比較表示の機能は実装しない。

GUIアプリ実装のためPySide6を利用。実行ファイル作成にはNuitkaを利用する。

## 基本要件

- マルチタブ構成。アプリ起動時はホーム画面表示。ファイル比較2か3こ、ディレクトリ比較2か3こをここで指定して、決定時にタブを新規作成。
  - ファイル、ディレクトリごとに入力ボックスを縦に３つ配置。ファイル、ディレクトリごとに２つ以上指定で比較開始ボタンが有効に。
  - ホーム画面でドラックしたタイプによってファイル１、ファイル２と順に埋めていく。ディレクトリの場合はディレクトリ１、２、３と順に埋めていく。
  - ドラッグ以外にもファイル選択、ディレクトリ選択を開いて選択することができる。
  - 比較を開始を押した場合に履歴に追加。
  - 履歴を表示、履歴から再度比較開始をできるように。
- 2つ、または3つのファイル、またはディレクトリの比較(再帰的探索)。
- 比較対象のファイルまたはディレクトリの内容を並べて表示、バックグラウンドで比較、比較進行状況の表示、比較結果の表示。(バックグラウンドの比較処理中も単一ファイルの比較。別タブ。比較結果はリストとリストの間に位置を合わせて表示、３個比較の場合もリスト３つの間は２つあるのでそこにファイルと位置を合わせて表示)。
- テキストの比較は改行コードの違いは無視=、スペースの違いは酷似扱い≒、改行の数の違いも酷似扱い≒、全く違うと考えられる場合は≠。
- 画像の比較ではピクセルレベルでの比較、バイナリ的に違っていてもピクセル的に同じであれば=、ピクセル的に違う場合は違う比率を算出(xx%)、全く画像が違うと考えられる場合は≠。EXIFなどの拡張情報だけ違う場合は≒EX。
- バイナリの比較ではバイナリレベルで違う比率を算出(xx%)、完全一致は=、全く画像が違うと考えられる場合は=（拡張情報）。
- バックグラウンド処理中でもアプリの終了は可能。
- 外部比較ツールの起動
  - ファイルの比較では表示より、外部比較ツールにファイルを渡して表示させる機能
  - ディレクトの比較結果の個々のファイルでダブルクリックで対応するファイルを抽出し、外部比較ツールにファイルを渡して表示させる機能

## 設定画面の要件

- テキスト、画像として扱う拡張子をそれぞれ設定。テキストエリア、下位行区切りで複数指定可能。
- ダークモードにするかを設定(初期起動時はOSの設定から反映)。
- テキスト、画像、バイナリごとに酷似≒とする%を定義。
- 外部比較ツールの定義
  - ファイルタイプ別（テキスト、画像、その他）に設定を外部比較ツールおよび引数を設定できること
  - 実行ファイルのパス
  - 引数の設定 %s を実際に渡すファイル名として３つ指定できるように
  - 「引き数を詰める」を設定できるように
  - 例： 実行ファイル：～/diff_win.exe。引数前、ファイル１引数、ファイル２引数、ファイル３引数、引数後。ファイル１とファイル３の指定をされた場合の実行コマンド ～/diff_win.exe ファイル１引数 ファイル３引数。「引き数を詰める」がTrueの場合は ～/diff_win.exe ファイル１引数 ファイル２引数。
